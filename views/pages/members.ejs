<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head') %>
  <link rel="stylesheet" href="/css/members.css">
</head>
<body>
  <%- include('../partials/navbar') %>

  <section class="members-page">
    <h2>Members of 2k17-24 batch</h2>
    <input type="text" id="searchInput" placeholder="Search by name, username, or email..." />

    <div class="members-container" id="membersContainer">
      <% members.forEach(member => { %>

        <div class="member-card">
            <div class="upper">
                <img src="<%- member.profileUrl ? member.profileUrl : '/images/user.png' %>" class="upper-img" alt="Profile of <%= member.name %>">
                <div class="upper-info">
                    <p class="name"><%= member.name %></p>
                    <% if (member.username) { %>
                        <span class="username" onclick="window.location.href='/u/<%= member.username %>'"><%= member.username %></span>
                    <% } else { %>
                        <span class="username" style="cursor: text;">Not registered</span>
                    <% } %>
                    <p class="year"><%- member.year %> &nbsp;in JNV</p>
                </div>
            </div>
            <p class="bio"><%- member.bio ? member.bio : "Nothing here" %></p>
            <div class="social-links">
                <a href="https://github.com/ujwalwadhai" target="_blank"><i class="fab fa-github"></i></a>
                <a href="https://linkedin.com/in/ujwalwadhai" target="_blank"><i class="fab fa-linkedin"></i></a>
                <a href="https://instagram.com/ujwal__w" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="mailto:wadhaiujwal@gmail.com" target="_blank"><i class="fal fa-envelope"></i></a>
            </div>
        </div>
        
      <% }) %>
    </div>
  </section>

  <script>
    const input = document.getElementById('searchInput');
    const cards = document.querySelectorAll('.member-card');

    input.addEventListener('input', () => {
      const val = input.value.toLowerCase();
      cards.forEach(card => {
        const text = card.innerText.toLowerCase();
        card.style.display = text.includes(val) ? 'block' : 'none';
      });
    });
  </script>
</body>
</html>
